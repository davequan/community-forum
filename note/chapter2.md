# Spring Boot实践，开发社区登录模块

## 1. 发送邮件

* 邮箱设置
  * 启用客户端SMTP服务

* Spring Email
  * 导入 jar 包
  * 邮箱参数配置
  * 使用 JavaMailSender 发送邮件
* 模板引擎
  * 使用 Thymeleaf 发送 HTML 邮件

## 2. 开发注册功能

* 访问注册页面
  * 点击顶部区域内的链接，打开注册页面。
* 提交注册数据
  * 通过表单提交数据。
  * 服务端验证账号是否已存在、邮箱是否已注册。
  * 服务端发送激活邮件。
* 激活注册账号
  * 点击邮件中的链接，访问服务端的激活服务。

## 3. 会话管理

* HTTP的基本性质
  * HTTP是简单的
  * HTTP是可扩展的
  * HTTP是无状态的，有会话的
* Cookie
  * 是服务器发送到浏览器，并保存在浏览器端的一小块数据。
  * 浏览器下次访问该服务器时，会自动携带块该数据，将其发送给服务器。
* Session
  * 是JavaEE的标准，用于在服务端记录客户端信息。
  * 数据存放在服务端更加安全，但是也会增加服务端的内存压力。

## 4. 生成验证码

* Kaptcha
  * 导入 jar 包
  * 编写 Kaptcha 配置类
  * 生成随机字符、生成图片

## 5. 开发登录、退出功能

* 访问登录页面
  * 点击顶部区域内的链接，打开登录页面。
* 登录
  * 验证账号、密码、验证码。
  * 成功时，生成登录凭证，发放给客户端。
  * 失败时，跳转回登录页。
* 退出
  * 将登录凭证修改为失效状态。
  * 跳转至网站首页。

## 6. 显示登录信息

* 拦截器示例
  * 定义拦截器，实现HandlerInterceptor
  * 配置拦截器，为它指定拦截、排除的路径
* 拦截器应用
  * 在请求开始时查询登录用户
  * 在本次请求中持有用户数据
  * 在模板视图上显示用户数据
  * 在请求结束时清理用户数据

## 7. 账号设置

* 上传文件
  * 请求：必须是POST请求
  * 表单：enctype=“multipart/form-data”
  * Spring MVC：通过 MultipartFile 处理上传文件
* 开发步骤
  * 访问账号设置页面
  * 上传头像
  * 获取头像

## 8. 检查登录状态

* 使用拦截器
  * 在方法前标注自定义注解
  * 拦截所有请求，只处理带有该注解的方法
* 自定义注解
  * 常用的元注解：
    @Target、@Retention、@Document、@Inherited
* 如何读取注解：
  Method.getDeclaredAnnotations ()
  Method.getAnnotation (Class<T> annotationClass)











